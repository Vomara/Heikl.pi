<!DOCTYPE html>
<html>
<head>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body style="text-align: center; margin-top: 100px; font-family: sans-serif;">

    <h1>تفعيل الخطوة 10</h1>
    <button id="pay" style="padding: 20px; background: #673ab7; color: white; border-radius: 10px; border: none; font-size: 20px;">
        دفع 0.1 Pi تجريبي
    </button>
    <p id="status"></p>

    <script>
        const Pi = window.Pi;
        Pi.init({ version: "2.0", sandbox: true }); // sandbox: true ضروري للتست نت

        document.getElementById('pay').onclick = async () => {
            const status = document.getElementById('status');
            status.innerText = "جاري الاتصال...";
            try {
                await Pi.createPayment({
                    amount: 0.1,
                    memo: "Testnet Payment",
                    metadata: { step: "10" }
                }, {
                    onReadyForServerApproval: (id) => status.innerText = "بانتظار الموافقة..",
                    onReadyForServerCompletion: (id, tx) => status.innerText = "نجحت العملية! TX: " + tx,
                    onCancel: (id) => status.innerText = "تم الإلغاء",
                    onError: (err) => status.innerText = "خطأ: " + err.message
                });
            } catch (e) {
                status.innerText = "افتحه من Pi Browser";
            }
        };
    </script>
</body>
</html>
